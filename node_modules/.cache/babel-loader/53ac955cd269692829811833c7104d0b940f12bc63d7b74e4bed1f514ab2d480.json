{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '../router';\nimport { APIService } from '../http/APIService';\nconst apiService = new APIService();\nexport default {\n  name: 'InvestmentCreate',\n  components: {},\n  //prevent user from accessing this page if not authorized\n  beforeCreate() {\n    if (localStorage.getItem(\"isAuthenticated\") && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n      this.authenticated = true;\n    } else {\n      this.authenticated = false;\n    }\n    if (this.authenticated === false) {\n      router.push(\"/auth\");\n    }\n  },\n  data() {\n    return {\n      customers: [],\n      showError: false,\n      investment: {},\n      pageTitle: \"Add New Investment\",\n      isUpdate: false,\n      showMsg: '',\n      date: new Date(),\n      authenticated: false\n    };\n  },\n  computed: {\n    list: {\n      get() {\n        return this.customers;\n      },\n      set(newValue) {\n        this.customers = newValue;\n      }\n    }\n  },\n  methods: {\n    getCustomers() {\n      apiService.getCustomerList().then(response => {\n        this.customers = response.data.data;\n        if (localStorage.getItem(\"isAuthenticated\") && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n          this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          localStorage.clear();\n          router.push(\"/auth\");\n        }\n      });\n    },\n    createInvestment() {\n      apiService.addNewInvestment(this.investment).then(response => {\n        if (response.status === 201) {\n          this.investment = response.data;\n          this.showMsg = \"\";\n          router.push('/investment-list/new');\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          this.showMsg = \"error\";\n        }\n      });\n    },\n    cancelOperation() {\n      router.push(\"/investment-list\");\n    },\n    updateInvestment() {\n      apiService.updateInvestment(this.investment).then(response => {\n        if (response.status === 200) {\n          this.investment = response.data;\n          router.push('/investment-list/update');\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          this.showMsg = \"error\";\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getCustomers();\n    if (this.$route.params.pk) {\n      this.pageTitle = \"Edit Investment\";\n      this.isUpdate = true;\n      apiService.getInvestment(this.$route.params.pk).then(response => {\n        this.investment = response.data;\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["router","APIService","apiService","name","components","beforeCreate","localStorage","getItem","JSON","parse","authenticated","push","data","customers","showError","investment","pageTitle","isUpdate","showMsg","date","Date","computed","list","get","set","newValue","methods","getCustomers","getCustomerList","then","response","validUserName","catch","error","status","clear","createInvestment","addNewInvestment","cancelOperation","updateInvestment","mounted","$route","params","pk","getInvestment"],"sources":["/Users/tomatosauce/Desktop/assign3-investments-part2-frontend-jaketamayo/investments-fe/src/components/InvestmentCreate.vue"],"sourcesContent":["<template>\n    <div class=\"container-fluid\">\n        <div class=\"row align-items-center justify-content-center\">\n            <div class=\" col align-items-center\">\n                <div class=\"row align-items-center justify-content-center\">\n                    <div class=\"col col-12 col-sm-10 col-md-10 col-lg-6\">\n                        <div class=\"alert alert-danger shadow\" role=\"alert\" v-if=\"showMsg === 'error'\">\n                            Please verify Investment Information\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row align-items-center justify-content-center\">\n                    <div class=\"col col-12 col-sm-10 col-md-10 col-lg-6 align-items-center\">\n                        <div class=\"card\">\n                            <div class=\"card-header\">{{ pageTitle }}</div>\n                            <div class=\"card-body\">\n                                <form ref=\"form\">\n                                    <div class=\"container-fluid\">\n                                        <div class=\" row justify-content-around py-2\">\n                                            <label class=\"col-4\">Customer</label>\n                                            <div class=\"col col-8\">\n                                                <select v-model=\"investment.customer\" class=\"form-select\">\n                                                    <option class=\"form-select form-select-sm \" v-for=\" item in list\"\n                                                        :value=\"item.pk\" :key=\"item.pk\"> {{ item.name }} </option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div class=\"form-group row justify-content-around py-2\">\n                                            <label class=\"col-4\">Category</label>\n                                            <div class=\"col col-8\">\n                                                <input v-model=\"investment.category\" type=\"text\"\n                                                    class=\"form-control-sm form-control\">\n                                            </div>\n                                        </div>\n                                        <div class=\"form-group row justify-content-around py-2\">\n                                            <label class=\"col-4\">Description</label>\n                                            <div class=\"col col-8\">\n                                                <input v-model=\"investment.description\" type=\"text\"\n                                                    class=\"form-control-sm form-control\">\n                                            </div>\n                                        </div>\n                                        <div class=\"form-group row justify-content-around py-2\">\n                                            <label class=\"col-4\">Acquired Value</label>\n                                            <div class=\"col col-8\">\n                                                <input v-model=\"investment.acquired_value\" type=\"number\"\n                                                    class=\"form-control-sm form-control\">\n                                            </div>\n                                        </div>\n                                        <div class=\"form-group row justify-content-around py-2\">\n                                            <label class=\"col-4\">Acquired Date</label>\n                                            <div class=\"col col-8\">\n                                                <input v-model=\"investment.acquired_date\" type=\"date\"\n                                                    class=\"form-control-sm form-control\">\n                                            </div>\n                                        </div>\n                                        <div class=\"form-group row justify-content-around py-2\">\n                                            <label class=\"col-4\">Recent Value</label>\n                                            <div class=\"col col-8\">\n                                                <input v-model=\"investment.recent_value\" type=\"number\"\n                                                    class=\"form-control-sm form-control\">\n                                            </div>\n                                        </div>\n                                        <div class=\"form-group row justify-content-around py-2\">\n                                            <label class=\"col-4\">Recent Date</label>\n                                            <div class=\"col col-8\">\n                                                <input v-model=\"investment.recent_date\" type=\"date\"\n                                                    class=\"form-control-sm form-control\">\n                                            </div>\n                                        </div>\n                                        <div class=\"row justify-content-around\">\n                                            <div v-if=\"!isUpdate\" type=\"button\" class=\"btn btn-primary col-4\"\n                                                @click=\"createInvestment\">Save</div>\n                                            <div v-if=\"isUpdate\" type=\"button\" class=\"btn btn-primary col-4\"\n                                                @click=\"updateInvestment\">Update</div>\n                                            <div type=\"button\" class=\"btn btn-secondary col-4\" @click=\"cancelOperation\">\n                                                Cancel</div>\n                                        </div>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport router from '../router';\nimport { APIService } from '../http/APIService';\nconst apiService = new APIService();\n\nexport default {\n    name: 'InvestmentCreate',\n    components: {},\n    //prevent user from accessing this page if not authorized\n    beforeCreate() {\n        if (localStorage.getItem(\"isAuthenticated\") &&\n            JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n            this.authenticated = true\n        }\n        else {\n            this.authenticated = false\n        }\n        if (this.authenticated === false) {\n            router.push(\"/auth\");\n        }\n    },\n    data() {\n        return {\n            customers: [],\n            showError: false,\n            investment: {},\n            pageTitle: \"Add New Investment\",\n            isUpdate: false,\n            showMsg: '',\n            date: new Date(),\n            authenticated: false\n        };\n    },\n    computed: {\n        list: {\n            get() {\n                return this.customers\n            },\n            set(newValue) {\n                this.customers = newValue\n            }\n        }\n    },\n    methods: {\n        getCustomers() {\n            apiService.getCustomerList().then(response => {\n                this.customers = response.data.data;\n                if (localStorage.getItem(\"isAuthenticated\")\n                    && JSON.parse(localStorage.getItem(\"isAuthenticated\")) === true) {\n                    this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\n                }\n            }).catch(error => {\n                if (error.response.status === 401) {\n                    localStorage.clear();\n                    router.push(\"/auth\");\n                }\n            });\n        },\n        createInvestment() {\n            apiService.addNewInvestment(this.investment).then(response => {\n                if (response.status === 201) {\n                    this.investment = response.data;\n                    this.showMsg = \"\";\n                    router.push('/investment-list/new');\n                } else {\n                    this.showMsg = \"error\";\n                }\n            }).catch(error => {\n                if (error.response.status === 401) {\n                    router.push(\"/auth\");\n                } else if (error.response.status === 400) {\n                    this.showMsg = \"error\";\n                }\n            });\n        },\n        cancelOperation() {\n            router.push(\"/investment-list\");\n        },\n        updateInvestment() {\n            apiService.updateInvestment(this.investment).then(response => {\n                if (response.status === 200) {\n                    this.investment = response.data;\n                    router.push('/investment-list/update');\n                } else {\n                    this.showMsg = \"error\";\n                }\n            }).catch(error => {\n                if (error.response.status === 401) {\n                    router.push(\"/auth\");\n                } else if (error.response.status === 400) {\n                    this.showMsg = \"error\";\n                }\n            });\n        }\n    },\n    mounted() {\n        this.getCustomers();\n        if (this.$route.params.pk) {\n            this.pageTitle = \"Edit Investment\";\n            this.isUpdate = true;\n            apiService.getInvestment(this.$route.params.pk).then(response => {\n                this.investment = response.data;\n            }).catch(error => {\n                if (error.response.status === 401) {\n                    router.push(\"/auth\");\n                }\n            });\n        }\n    },\n}\n</script>\n\n<style scoped>\n.aform {\n    margin-left: auto;\n    width: 60%;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}